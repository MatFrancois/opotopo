<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="OPOTOPO - Explorateur de randonn√©es en montagne avec filtres avanc√©s">
    <meta name="author" content="MatFrancois">
    <meta name="keywords" content="randonn√©e, montagne, trekking, alpinisme, France">
    
    <title>OPOTOPO - Explorateur de Randonn√©es</title>
    <script src="https://unpkg.com/maplibre-gl@^5.9.0/dist/maplibre-gl.js"></script>
    <link href="https://unpkg.com/maplibre-gl@^5.9.0/dist/maplibre-gl.css" rel="stylesheet" />
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    
    <!-- Styles externes -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" 
          integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" 
          crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.datatables.net/2.3.4/css/dataTables.dataTables.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/3.0.0/css/responsive.dataTables.css">
    
    <!-- Styles personnalis√©s -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- En-t√™te et filtres -->
    <header>
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="notebook-cell">
                        <h1 class="text-center display-1 mb-4">
                            üèîÔ∏è Opotopo
                        </h1>
                        
                        <!-- Filtre par r√©gion -->
                        <div class="mb-3">
                            <strong>
                                <i class="fas fa-filter me-1"></i>R√©gion :
                            </strong>
                            <div id="region-filters" class="text-center mt-3">
                                <!-- Les boutons de r√©gion seront ajout√©s ici par JavaScript -->
                            </div>
                        </div>
                        
                        <!-- Boutons de contr√¥le -->
                        <div class="mt-3">
                            <button class="btn btn-secondary btn-sm" 
                                    type="button" 
                                    data-bs-toggle="collapse" 
                                    data-bs-target="#advanced-filters" 
                                    aria-expanded="false" 
                                    aria-controls="advanced-filters">
                                <i class="fas fa-sliders-h me-1"></i>Filtres avanc√©s
                            </button>
                            <button class="btn btn-danger btn-sm ms-2" id="clear-all-filters">
                                <i class="fas fa-times me-1"></i>R√©initialiser
                            </button>
                        </div>
                        
                        <!-- Filtres avanc√©s (collapsible) -->
                        <div class="collapse mt-3" id="advanced-filters">
                            <div class="card card-body">
                                <div class="row">
                                    <div class="col-md-3 col-sm-6 col-12">
                                        <label for="alt-min">Altitude (m)</label>
                                        <input type="number" 
                                               id="alt-min" 
                                               placeholder="Min" 
                                               class="form-control form-control-sm mb-2"
                                               aria-label="Altitude minimum">
                                        <input type="number" 
                                               id="alt-max" 
                                               placeholder="Max" 
                                               class="form-control form-control-sm"
                                               aria-label="Altitude maximum">
                                    </div>
                                    <div class="col-md-3 col-sm-6 col-12">
                                        <label for="niveau-select">Niveau</label>
                                        <select id="niveau-select" 
                                                class="form-select form-select-sm"
                                                aria-label="S√©lection du niveau">
                                        </select>
                                    </div>
                                    <div class="col-md-3 col-sm-6 col-12">
                                        <label for="rando-filter">Randonn√©e</label>
                                        <input type="text" 
                                               id="rando-filter" 
                                               placeholder="Filtrer" 
                                               class="form-control form-control-sm"
                                               aria-label="Filtre par nom de randonn√©e">
                                    </div>
                                    <div class="col-md-3 col-sm-6 col-12">
                                        <label for="temps-max">Temps (min)</label>
                                        <input type="number" 
                                               id="temps-max" 
                                               placeholder="Max" 
                                               class="form-control form-control-sm"
                                               aria-label="Temps maximum">
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-3 col-sm-6 col-12">
                                        <label for="deniv-min">D√©nivel√© (m)</label>
                                        <input type="number" 
                                               id="deniv-min" 
                                               placeholder="Min" 
                                               class="form-control form-control-sm mb-2"
                                               aria-label="D√©nivel√© minimum">
                                        <input type="number" 
                                               id="deniv-max" 
                                               placeholder="Max" 
                                               class="form-control form-control-sm"
                                               aria-label="D√©nivel√© maximum">
                                    </div>
                                    <div class="col-md-3 col-sm-6 col-12">
                                        <label for="dist-min">Distance (km)</label>
                                        <input type="number" 
                                               id="dist-min" 
                                               placeholder="Min" 
                                               class="form-control form-control-sm mb-2"
                                               aria-label="Distance minimum">
                                        <input type="number" 
                                               id="dist-max" 
                                               placeholder="Max" 
                                               class="form-control form-control-sm"
                                               aria-label="Distance maximum">
                                    </div>
                                    <div class="col-md-3 col-sm-6 col-12">
                                        <label for="vallees-filter">Vall√©es</label>
                                        <input type="text" 
                                               id="vallees-filter" 
                                               placeholder="Filtrer" 
                                               class="form-control form-control-sm"
                                               aria-label="Filtre par vall√©e">
                                    </div>
                                    <div class="col-md-3 col-sm-6 col-12">
                                        <label>√âquipement</label>
                                        <div class="form-check">
                                            <input class="form-check-input" 
                                                   type="checkbox" 
                                                   id="piolet-check">
                                            <label class="form-check-label" for="piolet-check">
                                                Piolet requis
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" 
                                                   type="checkbox" 
                                                   id="crampons-check">
                                            <label class="form-check-label" for="crampons-check">
                                                Crampons requis
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-3 col-sm-6 col-12">
                                        <label for="pop-min">N commentaires (min)</label>
                                        <input type="number" 
                                               id="pop-min" 
                                               placeholder="Min" 
                                               class="form-control form-control-sm"
                                               aria-label="Nombre minimum de commentaires">
                                    </div>
                                    <div class="col-md-3 col-sm-6 col-12">
                                        <label for="note-min">Note</label>
                                        <input type="number" 
                                               id="note-min" 
                                               placeholder="Min" 
                                               class="form-control form-control-sm mb-2" 
                                               step="0.1"
                                               aria-label="Note minimum">
                                        <input type="number" 
                                               id="note-max" 
                                               placeholder="Max" 
                                               class="form-control form-control-sm" 
                                               step="0.1"
                                               aria-label="Note maximum">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Table des randonn√©es -->
    <main>
    <!-- Table des randonn√©es -->
    <main>
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <table id="randonnees-table" class="display compact nowrap" style="width:100%">
                        <thead>
                            <tr>
                                <th>Altitude (m)</th>
                                <th>Niveau</th>
                                <th>Randonn√©e</th>
                                <th>Temps</th>
                                <th>D√©nivel√© (m)</th>
                                <th>Distance (km)</th>
                                <th>R√©gion</th>
                                <th>Vall√©es</th>
                                <th>Piolet</th>
                                <th>Crampons</th>
                                <th>N coms</th>
                                <th>Note</th>
                                <th>URL</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Les donn√©es seront ins√©r√©es ici par JavaScript -->
                        </tbody>
                    </table>
                    <p class="mt-3">
                        <b>Niveaux :</b> üë° marcheur | üëü randonneur | ü•æ montagnard | üßó grimpeur
                    </p>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Pied de page -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="notebook-cell">
                        <h2>M√©thodologie</h2>
                        <p>
                            <b>Note.</b> La note d'une randonn√©e est bas√©e sur les commentaires de celle-ci, 
                            elle se situe entre 0 et 4. Il faut avoir plus de 6 commentaires pour avoir une note. 
                            Cette borne de 6 correspond au premier quartile de la distribution du nombre de 
                            commentaires par topo. √Ä chaque commentaire est associ√©e une note selon le mod√®le 
                            de classification multi-lang 
                            <a href="https://huggingface.co/tabularisai/multilingual-sentiment-analysis" 
                               target="_blank" 
                               rel="noopener noreferrer">tabularisai</a>. 
                            Pour chaque randonn√©e, la note correspond √† la moyenne des notes des commentaires 
                            plus ou moins l'√©cart-type.
                        </p>
                    </div>
                    <div class="notebook-cell">
                        <h2>√Ä propos</h2>
                        <p>
                            <a href="https://github.com/MatFrancois/opotopo" 
                               target="_blank" 
                               rel="noopener noreferrer">
                                Code source sur GitHub
                            </a>
                        </p>
                    </div>
                </div>
                <div id="map" style="height: 400px; width: 100%; margin-top: 20px;"></div>
                <script>
                    var map = new maplibregl.Map({
                        container: 'map', // container id
                        style: 'https://demotiles.maplibre.org/style.json', // style URL
                        center: [0.5, 42.8], // starting position [lng, lat] - Pyr√©n√©es
                        zoom: 7 // starting zoom
                    });
                    
                    // Ajouter les contr√¥les de navigation
                    map.addControl(new maplibregl.NavigationControl(), 'top-right');
                </script>
            </div>
        </div>
    </footer>

    <!-- Scripts externes -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" 
            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" 
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" 
            crossorigin="anonymous"></script>
    <script src="https://cdn.datatables.net/2.3.4/js/dataTables.js"></script>
    <script src="https://cdn.datatables.net/responsive/3.0.0/js/dataTables.responsive.js"></script>
    
    <!-- Scripts de l'application -->
    <script src="js/config.js"></script>
    <script src="js/table.js"></script>
    <script src="js/filters.js"></script>
    <script src="js/main.js"></script>
</body>
</html>